<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>American Mortgage - Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<style>
:root{--navy:#0a0870;--navy-light:#1a1890;--red:#d93c37;--red-dark:#b8302c;--white:#fff;--grey-50:#f9fafb;--grey-100:#f3f4f6;--grey-200:#e5e7eb;--grey-300:#d1d5db;--grey-400:#9ca3af;--grey-500:#6b7280;--grey-600:#4b5563;--grey-700:#374151;--grey-800:#1f2937;--green:#10b981;--blue:#3b82f6;--sidebar-width:260px}
*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Inter',-apple-system,sans-serif;background:var(--grey-100);color:var(--grey-800);min-height:100vh}
.admin-layout{display:flex;min-height:100vh}
.sidebar{width:var(--sidebar-width);background:var(--white);border-right:1px solid var(--grey-200);display:flex;flex-direction:column;position:fixed;height:100vh;overflow-y:auto}
.sidebar-logo{padding:20px 24px;border-bottom:1px solid var(--grey-200)}.sidebar-logo img{height:36px}
.sidebar-nav{flex:1;padding:16px 12px}.nav-section{margin-bottom:24px}
.nav-label{font-size:11px;font-weight:600;color:var(--grey-400);text-transform:uppercase;letter-spacing:.5px;padding:0 12px;margin-bottom:8px;display:block}
.nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:var(--grey-600);font-size:14px;font-weight:500;text-decoration:none;transition:all .15s;cursor:pointer}
.nav-item:hover{background:var(--grey-100);color:var(--grey-800)}.nav-item.active{background:var(--navy);color:var(--white)}.nav-item svg{width:20px;height:20px;flex-shrink:0}
.sidebar-footer{padding:16px;border-top:1px solid var(--grey-200)}
.sidebar-user{display:flex;align-items:center;gap:12px;padding:8px;border-radius:8px}
.user-avatar{width:36px;height:36px;border-radius:50%;background:var(--navy);color:var(--white);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}
.user-info{flex:1}.user-name{font-size:14px;font-weight:600;color:var(--grey-800)}.user-email{font-size:12px;color:var(--grey-500)}
.main-content{flex:1;margin-left:var(--sidebar-width)}
.top-bar{background:var(--white);border-bottom:1px solid var(--grey-200);padding:16px 32px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:10}
.top-bar h1{font-size:20px;font-weight:600;color:var(--grey-800)}.top-bar-actions{display:flex;gap:12px}
.btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;border:none;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .15s;text-decoration:none}
.btn-primary{background:var(--red);color:var(--white)}.btn-primary:hover{background:var(--red-dark)}
.btn-secondary{background:var(--white);color:var(--grey-700);border:1px solid var(--grey-300)}.btn-secondary:hover{background:var(--grey-50);border-color:var(--grey-400)}
.btn svg{width:18px;height:18px}.page-content{padding:32px}
.card{background:var(--white);border-radius:12px;border:1px solid var(--grey-200);margin-bottom:24px}
.card-header{padding:20px 24px;border-bottom:1px solid var(--grey-200);display:flex;align-items:center;justify-content:space-between}
.card-title{font-size:16px;font-weight:600;color:var(--grey-800)}.card-body{padding:24px}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:24px}
.stat-card{background:var(--white);border-radius:12px;border:1px solid var(--grey-200);padding:20px 24px}
.stat-card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.stat-card-title{font-size:13px;font-weight:500;color:var(--grey-500)}
.stat-card-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center}
.stat-card-icon.blue{background:#eff6ff;color:var(--blue)}.stat-card-icon.green{background:#ecfdf5;color:var(--green)}
.stat-card-icon.red{background:#fef2f2;color:var(--red)}.stat-card-icon.navy{background:#eef2ff;color:var(--navy)}
.stat-card-icon svg{width:20px;height:20px}.stat-card-value{font-size:28px;font-weight:700;color:var(--grey-800)}
.form-group{margin-bottom:20px}.form-label{display:block;font-size:13px;font-weight:500;color:var(--grey-700);margin-bottom:6px}
.form-input,.form-textarea,.form-select{width:100%;padding:10px 14px;border:1px solid var(--grey-300);border-radius:8px;font-size:14px;font-family:inherit;transition:all .15s;background:var(--white)}
.form-input:focus,.form-textarea:focus,.form-select:focus{outline:none;border-color:var(--navy);box-shadow:0 0 0 3px rgba(10,8,112,.1)}
.form-textarea{min-height:100px;resize:vertical}.form-hint{font-size:12px;color:var(--grey-500);margin-top:4px}
.form-row{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}
.toggle-wrapper{display:flex;align-items:center;gap:12px}.toggle{position:relative;width:44px;height:24px}
.toggle input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;inset:0;background:var(--grey-300);border-radius:24px;transition:.2s}
.toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:.2s}
.toggle input:checked+.toggle-slider{background:var(--navy)}.toggle input:checked+.toggle-slider:before{transform:translateX(20px)}
.toggle-label{font-size:14px;color:var(--grey-700)}
.list-item{display:flex;align-items:center;gap:16px;padding:16px;border:1px solid var(--grey-200);border-radius:10px;margin-bottom:12px;background:var(--white)}
.list-item:hover{border-color:var(--grey-300)}.list-item-content{flex:1}.list-item-actions{display:flex;gap:8px}
.btn-icon{width:36px;height:36px;border-radius:8px;border:1px solid var(--grey-200);background:var(--white);cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--grey-500);transition:all .15s}
.btn-icon:hover{background:var(--grey-50);color:var(--grey-700);border-color:var(--grey-300)}
.btn-icon.danger:hover{background:#fef2f2;color:var(--red);border-color:var(--red)}.btn-icon svg{width:16px;height:16px}
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:24px}.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
.quick-links{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:24px}
.quick-link{display:flex;flex-direction:column;align-items:center;gap:12px;padding:24px 16px;border:1px solid var(--grey-200);border-radius:12px;background:var(--white);cursor:pointer;transition:all .15s;text-decoration:none}
.quick-link:hover{border-color:var(--navy);background:var(--grey-50);transform:translateY(-2px)}
.quick-link-icon{width:48px;height:48px;border-radius:12px;background:var(--grey-100);display:flex;align-items:center;justify-content:center;color:var(--navy)}
.quick-link-icon svg{width:24px;height:24px}.quick-link-text{font-size:14px;font-weight:500;color:var(--grey-700)}
.toast{position:fixed;bottom:24px;right:24px;padding:16px 24px;border-radius:10px;background:var(--grey-800);color:var(--white);font-size:14px;font-weight:500;display:flex;align-items:center;gap:12px;z-index:1000;transform:translateY(100px);opacity:0;transition:all .3s}
.toast.show{transform:translateY(0);opacity:1}.toast.success{background:var(--green)}.toast.error{background:var(--red)}.toast svg{width:20px;height:20px}
.loading{display:flex;align-items:center;justify-content:center;padding:60px}
.spinner{width:40px;height:40px;border:3px solid var(--grey-200);border-top-color:var(--navy);border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.feature-item{display:flex;gap:8px;margin-bottom:8px}.feature-item input{flex:1}.btn-add-feature{margin-top:8px}
.blog-table{width:100%;border-collapse:collapse}.blog-table th,.blog-table td{padding:14px 16px;text-align:left;border-bottom:1px solid var(--grey-200)}
.blog-table th{font-size:12px;font-weight:600;color:var(--grey-500);text-transform:uppercase;letter-spacing:.5px;background:var(--grey-50)}
.blog-table tr:hover td{background:var(--grey-50)}.blog-table .thumb{width:48px;height:48px;border-radius:6px;object-fit:cover}
.blog-status{padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500}.blog-status.published{background:#ecfdf5;color:var(--green)}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:100;opacity:0;visibility:hidden;transition:all .2s}
.modal-overlay.show{opacity:1;visibility:visible}
.modal{background:var(--white);border-radius:16px;width:90%;max-width:600px;max-height:90vh;overflow:hidden;transform:scale(.95);transition:all .2s}
.modal-overlay.show .modal{transform:scale(1)}
.modal-header{padding:20px 24px;border-bottom:1px solid var(--grey-200);display:flex;align-items:center;justify-content:space-between}
.modal-title{font-size:18px;font-weight:600}
.modal-close{width:36px;height:36px;border-radius:8px;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--grey-500)}
.modal-close:hover{background:var(--grey-100)}.modal-body{padding:24px;max-height:60vh;overflow-y:auto}
.modal-footer{padding:16px 24px;border-top:1px solid var(--grey-200);display:flex;justify-content:flex-end;gap:12px}
.empty-state{text-align:center;padding:60px 20px}
@media(max-width:1200px){.stats-grid,.quick-links{grid-template-columns:repeat(2,1fr)}}
@media(max-width:900px){.sidebar{transform:translateX(-100%)}.main-content{margin-left:0}.form-row,.grid-2,.grid-3{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="admin-layout">
<aside class="sidebar">
<div class="sidebar-logo"><img src="../images/png01.png" alt="American Mortgage"></div>
<nav class="sidebar-nav">
<div class="nav-section"><span class="nav-label">MAIN</span>
<a class="nav-item active" data-page="dashboard"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>Dashboard</a>
<a class="nav-item" data-page="settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>Site Settings</a>
</div>
<div class="nav-section"><span class="nav-label">HOMEPAGE</span>
<a class="nav-item" data-page="hero"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>Hero Section</a>
<a class="nav-item" data-page="stats"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>Stats Bar</a>
<a class="nav-item" data-page="loans"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>Featured Loans</a>
<a class="nav-item" data-page="dpa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/><line x1="12" y1="18" x2="12" y2="6"/></svg>DPA Section</a>
<a class="nav-item" data-page="tools"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>Tools</a>
<a class="nav-item" data-page="agent"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>Agent Section</a>
<a class="nav-item" data-page="app"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>App Section</a>
<a class="nav-item" data-page="footer"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="15" x2="21" y2="15"/></svg>Footer</a>
</div>
<div class="nav-section"><span class="nav-label">CONTENT</span>
<a class="nav-item" data-page="blog"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/></svg>Blog Posts</a>
<a class="nav-item" data-page="navigation"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>Navigation</a>
</div>
</nav>
<div class="sidebar-footer"><div class="sidebar-user"><div class="user-avatar" id="user-avatar">A</div><div class="user-info"><div class="user-name">Admin</div><div class="user-email" id="user-email">Loading...</div></div></div></div>
</aside>
<main class="main-content">
<div class="top-bar">
<h1 id="page-title">Dashboard</h1>
<div class="top-bar-actions">
<a href="/" target="_blank" class="btn btn-secondary"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>View Site</a>
<button class="btn btn-primary" id="btn-save" style="display:none"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>Save Changes</button>
</div>
</div>
<div class="page-content" id="page-content"><div class="loading"><div class="spinner"></div></div></div>
</main>
</div>
<div class="toast" id="toast"></div>
<div class="modal-overlay" id="modal-overlay">
<div class="modal">
<div class="modal-header"><h3 class="modal-title" id="modal-title">Modal</h3><button class="modal-close" onclick="closeModal()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>
<div class="modal-body" id="modal-body"></div>
<div class="modal-footer" id="modal-footer"></div>
</div>
</div>
<script>
const GitHubAPI={token:null,repo:'americanmtg/american-mortgage',branch:'main',basePath:'american-mortgage-netlify',
async init(){const user=netlifyIdentity.currentUser();if(user){this.token=await user.jwt();return true}return false},
async request(endpoint,options={}){const r=await fetch(`/.netlify/git/github${endpoint}`,{...options,headers:{'Authorization':`Bearer ${this.token}`,'Content-Type':'application/json',...options.headers}});if(!r.ok)throw new Error(`GitHub API error: ${r.status}`);return r.json()},
async getFile(path){try{const fullPath=`${this.basePath}/${path}`;const data=await this.request(`/contents/${fullPath}?ref=${this.branch}`);return{content:atob(data.content),sha:data.sha}}catch(e){return null}},
async saveFile(path,content,message='Update via admin'){const fullPath=`${this.basePath}/${path}`;let sha=null;try{const existing=await this.request(`/contents/${fullPath}?ref=${this.branch}`);sha=existing.sha}catch(e){}const body={message,content:btoa(unescape(encodeURIComponent(content))),branch:this.branch};if(sha)body.sha=sha;return this.request(`/contents/${fullPath}`,{method:'PUT',body:JSON.stringify(body)})}};

const DataStore={data:{},modified:new Set(),
async load(file){if(this.data[file])return this.data[file];const result=await GitHubAPI.getFile(`_data/${file}.json`);if(result){this.data[file]=JSON.parse(result.content);return this.data[file]}return null},
async loadAll(){const files=['settings','navigation','hero','stats','featured-loans','dpa','tools','agent','learning-hub','app','sticky-cta','footer','blogs'];await Promise.all(files.map(f=>this.load(f)));return this.data},
update(file,data){this.data[file]=data;this.modified.add(file)},
async save(file){if(!this.data[file])return;const content=JSON.stringify(this.data[file],null,2);await GitHubAPI.saveFile(`_data/${file}.json`,content,`Update ${file}`);this.modified.delete(file)},
async saveAll(){await Promise.all(Array.from(this.modified).map(f=>this.save(f)));this.modified.clear()}};

const BlogStore={posts:[],async loadAll(){try{const data=await DataStore.load('blogs');this.posts=data||[];return this.posts}catch(e){this.posts=[];return[]}},add(p){this.posts.push(p)},update(i,p){this.posts[i]=p},delete(i){this.posts.splice(i,1)}};

let currentPage='dashboard';
document.addEventListener('DOMContentLoaded',()=>{netlifyIdentity.init();const user=netlifyIdentity.currentUser();if(user){initApp(user)}else{netlifyIdentity.open('login');netlifyIdentity.on('login',user=>{netlifyIdentity.close();initApp(user)})}});

async function initApp(user){document.getElementById('user-email').textContent=user.email;document.getElementById('user-avatar').textContent=user.email[0].toUpperCase();await GitHubAPI.init();await DataStore.loadAll();await BlogStore.loadAll();setupNav();renderPage('dashboard')}

function setupNav(){document.querySelectorAll('.nav-item').forEach(item=>{item.onclick=e=>{e.preventDefault();navigateTo(item.dataset.page)}});document.getElementById('btn-save').onclick=saveChanges}

function navigateTo(page){document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));document.querySelector(`[data-page="${page}"]`)?.classList.add('active');renderPage(page)}

function renderPage(page){currentPage=page;const titles={dashboard:'Dashboard',settings:'Site Settings',hero:'Hero Section',stats:'Stats Bar',loans:'Featured Loans',dpa:'Down Payment Assistance',tools:'Tools & Calculators',agent:'Agent Section',app:'App Section',footer:'Footer',blog:'Blog Posts',navigation:'Navigation'};document.getElementById('page-title').textContent=titles[page]||page;document.getElementById('btn-save').style.display=page==='dashboard'?'none':'flex';if(Pages[page])document.getElementById('page-content').innerHTML=Pages[page]()}

function showToast(msg,type='success'){const t=document.getElementById('toast');t.innerHTML=`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${type==='success'?'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>':'<circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/>'}</svg>${msg}`;t.className=`toast ${type} show`;setTimeout(()=>t.classList.remove('show'),3000)}

async function saveChanges(){const btn=document.getElementById('btn-save');btn.disabled=true;btn.innerHTML='<div class="spinner" style="width:18px;height:18px;border-width:2px;"></div> Saving...';try{await DataStore.saveAll();showToast('Changes saved!')}catch(e){console.error(e);showToast('Error saving','error')}btn.disabled=false;btn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg> Save Changes'}

function updateField(store,field,value){if(!DataStore.data[store])DataStore.data[store]={};DataStore.data[store][field]=value;DataStore.modified.add(store)}
function updateStatItem(i,f,v){DataStore.data.stats.items[i][f]=v;DataStore.modified.add('stats')}
function addStat(){if(!DataStore.data.stats)DataStore.data.stats={items:[]};DataStore.data.stats.items.push({number:'',label:''});DataStore.modified.add('stats');renderPage('stats')}
function deleteStat(i){DataStore.data.stats.items.splice(i,1);DataStore.modified.add('stats');renderPage('stats')}
function updateLoan(i,f,v){DataStore.data['featured-loans'].loans[i][f]=v;DataStore.modified.add('featured-loans')}
function updateLoanFeature(li,fi,v){DataStore.data['featured-loans'].loans[li].features[fi]=v;DataStore.modified.add('featured-loans')}
function addLoanFeature(li){DataStore.data['featured-loans'].loans[li].features.push('');DataStore.modified.add('featured-loans');renderPage('loans')}
function deleteLoanFeature(li,fi){DataStore.data['featured-loans'].loans[li].features.splice(fi,1);DataStore.modified.add('featured-loans');renderPage('loans')}
function updateDpaFeature(i,v){DataStore.data.dpa.features[i]=v;DataStore.modified.add('dpa')}
function addDpaFeature(){if(!DataStore.data.dpa.features)DataStore.data.dpa.features=[];DataStore.data.dpa.features.push('');DataStore.modified.add('dpa');renderPage('dpa')}
function deleteDpaFeature(i){DataStore.data.dpa.features.splice(i,1);DataStore.modified.add('dpa');renderPage('dpa')}
function updateTool(i,f,v){DataStore.data.tools.items[i][f]=v;DataStore.modified.add('tools')}
function addTool(){if(!DataStore.data.tools.items)DataStore.data.tools.items=[];DataStore.data.tools.items.push({title:'',description:'',url:''});DataStore.modified.add('tools');renderPage('tools')}
function deleteTool(i){DataStore.data.tools.items.splice(i,1);DataStore.modified.add('tools');renderPage('tools')}
function updateAppFeature(i,f,v){DataStore.data.app.features[i][f]=v;DataStore.modified.add('app')}
function updateFooterColumn(i,f,v){DataStore.data.footer.columns[i][f]=v;DataStore.modified.add('footer')}
function updateFooterLink(ci,li,f,v){DataStore.data.footer.columns[ci].links[li][f]=v;DataStore.modified.add('footer')}
function addFooterLink(ci){DataStore.data.footer.columns[ci].links.push({label:'',url:''});DataStore.modified.add('footer');renderPage('footer')}
function deleteFooterLink(ci,li){DataStore.data.footer.columns[ci].links.splice(li,1);DataStore.modified.add('footer');renderPage('footer')}
function updateNavItem(i,f,v){DataStore.data.navigation.items[i][f]=v;DataStore.modified.add('navigation')}
function addNavItem(){if(!DataStore.data.navigation.items)DataStore.data.navigation.items=[];DataStore.data.navigation.items.push({label:'',url:''});DataStore.modified.add('navigation');renderPage('navigation')}
function deleteNavItem(i){DataStore.data.navigation.items.splice(i,1);DataStore.modified.add('navigation');renderPage('navigation')}

function openBlogEditor(i=null){const isNew=i===null;const p=isNew?{title:'',excerpt:'',image:'',readTime:'5 min read',authorName:'',authorTitle:'',authorImage:'',slug:''}:BlogStore.posts[i];document.getElementById('modal-title').textContent=isNew?'New Blog Post':'Edit Blog Post';document.getElementById('modal-body').innerHTML=`<div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" id="blog-title" value="${p.title}"></div><div class="form-group"><label class="form-label">Slug</label><input type="text" class="form-input" id="blog-slug" value="${p.slug||''}" placeholder="auto-generated"></div><div class="form-group"><label class="form-label">Excerpt</label><textarea class="form-textarea" id="blog-excerpt">${p.excerpt}</textarea></div><div class="form-row"><div class="form-group"><label class="form-label">Featured Image</label><input type="text" class="form-input" id="blog-image" value="${p.image}" placeholder="/images/..."></div><div class="form-group"><label class="form-label">Read Time</label><input type="text" class="form-input" id="blog-readtime" value="${p.readTime}"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Author Name</label><input type="text" class="form-input" id="blog-author" value="${p.authorName}"></div><div class="form-group"><label class="form-label">Author Title</label><input type="text" class="form-input" id="blog-authortitle" value="${p.authorTitle}"></div></div><div class="form-group"><label class="form-label">Author Image</label><input type="text" class="form-input" id="blog-authorimage" value="${p.authorImage}" placeholder="/images/..."></div>`;document.getElementById('modal-footer').innerHTML=`<button class="btn btn-secondary" onclick="closeModal()">Cancel</button><button class="btn btn-primary" onclick="saveBlogPost(${i})">Save Post</button>`;openModal()}

function saveBlogPost(i){const p={title:document.getElementById('blog-title').value,slug:document.getElementById('blog-slug').value||document.getElementById('blog-title').value.toLowerCase().replace(/[^a-z0-9]+/g,'-'),excerpt:document.getElementById('blog-excerpt').value,image:document.getElementById('blog-image').value,readTime:document.getElementById('blog-readtime').value,authorName:document.getElementById('blog-author').value,authorTitle:document.getElementById('blog-authortitle').value,authorImage:document.getElementById('blog-authorimage').value};if(i===null)BlogStore.add(p);else BlogStore.update(i,p);DataStore.data.blogs=BlogStore.posts;DataStore.modified.add('blogs');closeModal();renderPage('blog');showToast('Blog saved. Click Save Changes to publish.')}

function deleteBlogPost(i){if(confirm('Delete this post?')){BlogStore.delete(i);DataStore.data.blogs=BlogStore.posts;DataStore.modified.add('blogs');renderPage('blog');showToast('Deleted. Click Save Changes to confirm.')}}

function openModal(){document.getElementById('modal-overlay').classList.add('show')}
function closeModal(){document.getElementById('modal-overlay').classList.remove('show')}
document.getElementById('modal-overlay').onclick=e=>{if(e.target.id==='modal-overlay')closeModal()};

const esc=s=>s?String(s).replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'):'';
const Pages={
dashboard(){const d=DataStore.data,bc=BlogStore.posts?.length||0,nc=d.navigation?.items?.length||0,lc=d['featured-loans']?.loans?.length||0,tc=d.tools?.items?.length||0;return`<div class="stats-grid"><div class="stat-card"><div class="stat-card-header"><span class="stat-card-title">Blog Posts</span><div class="stat-card-icon blue"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/></svg></div></div><div class="stat-card-value">${bc}</div></div><div class="stat-card"><div class="stat-card-header"><span class="stat-card-title">Nav Items</span><div class="stat-card-icon green"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></div></div><div class="stat-card-value">${nc}</div></div><div class="stat-card"><div class="stat-card-header"><span class="stat-card-title">Loan Types</span><div class="stat-card-icon red"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg></div></div><div class="stat-card-value">${lc}</div></div><div class="stat-card"><div class="stat-card-header"><span class="stat-card-title">Tools</span><div class="stat-card-icon navy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg></div></div><div class="stat-card-value">${tc}</div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Quick Actions</h3></div><div class="card-body"><div class="quick-links"><a class="quick-link" onclick="navigateTo('settings')"><div class="quick-link-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/></svg></div><span class="quick-link-text">Site Settings</span></a><a class="quick-link" onclick="navigateTo('hero')"><div class="quick-link-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"/></svg></div><span class="quick-link-text">Edit Hero</span></a><a class="quick-link" onclick="navigateTo('blog')"><div class="quick-link-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19l7-7 3 3-7 7-3-3z"/></svg></div><span class="quick-link-text">Manage Blog</span></a><a class="quick-link" onclick="navigateTo('loans')"><div class="quick-link-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg></div><span class="quick-link-text">Edit Loans</span></a></div></div></div>`},
settings(){const d=DataStore.data.settings||{};return`<div class="card"><div class="card-header"><h3 class="card-title">General Settings</h3></div><div class="card-body"><div class="form-row"><div class="form-group"><label class="form-label">Site Name</label><input type="text" class="form-input" value="${esc(d.siteName)}" onchange="updateField('settings','siteName',this.value)"></div><div class="form-group"><label class="form-label">Phone Number</label><input type="text" class="form-input" value="${esc(d.phone)}" onchange="updateField('settings','phone',this.value)"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" value="${esc(d.email)}" onchange="updateField('settings','email',this.value)"></div><div class="form-group"><label class="form-label">Address</label><input type="text" class="form-input" value="${esc(d.address)}" onchange="updateField('settings','address',this.value)"></div></div><div class="form-group"><label class="form-label">Legal Banner</label><textarea class="form-textarea" onchange="updateField('settings','legalBanner',this.value)">${esc(d.legalBanner)}</textarea></div></div></div>`},
hero(){const d=DataStore.data.hero||{};return`<div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">Hero Content</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Badge Text</label><input type="text" class="form-input" value="${esc(d.badge)}" onchange="updateField('hero','badge',this.value)"></div><div class="form-group"><label class="form-label">Title Line 1</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('hero','title',this.value)"></div><div class="form-group"><label class="form-label">Title Emphasis</label><input type="text" class="form-input" value="${esc(d.titleEmphasis)}" onchange="updateField('hero','titleEmphasis',this.value)"></div><div class="form-group"><label class="form-label">Subtext</label><input type="text" class="form-input" value="${esc(d.subtext)}" onchange="updateField('hero','subtext',this.value)"></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Button & Rating</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Button Text</label><input type="text" class="form-input" value="${esc(d.buttonText)}" onchange="updateField('hero','buttonText',this.value)"></div><div class="form-group"><label class="form-label">Button URL</label><input type="text" class="form-input" value="${esc(d.buttonUrl)}" onchange="updateField('hero','buttonUrl',this.value)"></div><div class="form-row"><div class="form-group"><label class="form-label">Rating Percent</label><input type="text" class="form-input" value="${esc(d.ratingPercent)}" onchange="updateField('hero','ratingPercent',this.value)"></div><div class="form-group"><label class="form-label">Rating Text</label><input type="text" class="form-input" value="${esc(d.ratingText)}" onchange="updateField('hero','ratingText',this.value)"></div></div></div></div></div>`},
stats(){const d=DataStore.data.stats||{items:[]},items=d.items||[];return`<div class="card"><div class="card-header"><h3 class="card-title">Statistics</h3><button class="btn btn-secondary" onclick="addStat()">+ Add Stat</button></div><div class="card-body">${items.map((s,i)=>`<div class="list-item"><div class="list-item-content" style="display:flex;gap:16px;flex:1;"><div class="form-group" style="flex:1;margin:0;"><input type="text" class="form-input" value="${esc(s.number)}" placeholder="Number" onchange="updateStatItem(${i},'number',this.value)"></div><div class="form-group" style="flex:2;margin:0;"><input type="text" class="form-input" value="${esc(s.label)}" placeholder="Label" onchange="updateStatItem(${i},'label',this.value)"></div></div><button class="btn-icon danger" onclick="deleteStat(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div>`).join('')}</div></div>`},
loans(){const d=DataStore.data['featured-loans']||{loans:[]};return`<div class="card"><div class="card-header"><h3 class="card-title">Section Header</h3></div><div class="card-body"><div class="form-row"><div class="form-group"><label class="form-label">Badge</label><input type="text" class="form-input" value="${esc(d.badge)}" onchange="updateField('featured-loans','badge',this.value)"></div><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('featured-loans','title',this.value)"></div></div><div class="form-group"><label class="form-label">Title Emphasis</label><input type="text" class="form-input" value="${esc(d.titleEmphasis)}" onchange="updateField('featured-loans','titleEmphasis',this.value)"></div></div></div><div class="grid-3">${(d.loans||[]).map((l,i)=>`<div class="card"><div class="card-header"><h3 class="card-title">${esc(l.title)}</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(l.title)}" onchange="updateLoan(${i},'title',this.value)"></div><div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" onchange="updateLoan(${i},'description',this.value)">${esc(l.description)}</textarea></div><div class="form-group"><label class="form-label">Image Path</label><input type="text" class="form-input" value="${esc(l.image)}" onchange="updateLoan(${i},'image',this.value)"></div><div class="form-group"><label class="form-label">Button Text</label><input type="text" class="form-input" value="${esc(l.buttonText)}" onchange="updateLoan(${i},'buttonText',this.value)"></div><div class="form-group"><div class="toggle-wrapper"><label class="toggle"><input type="checkbox" ${l.showDPA?'checked':''} onchange="updateLoan(${i},'showDPA',this.checked)"><span class="toggle-slider"></span></label><span class="toggle-label">Show DPA Badge</span></div></div><div class="form-group"><label class="form-label">Features</label>${(l.features||[]).map((f,fi)=>`<div class="feature-item"><input type="text" class="form-input" value="${esc(f)}" onchange="updateLoanFeature(${i},${fi},this.value)"><button class="btn-icon danger" onclick="deleteLoanFeature(${i},${fi})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>`).join('')}<button class="btn btn-secondary btn-add-feature" onclick="addLoanFeature(${i})">+ Add Feature</button></div></div></div>`).join('')}</div>`},
dpa(){const d=DataStore.data.dpa||{};return`<div class="card"><div class="card-header"><h3 class="card-title">DPA Section</h3></div><div class="card-body"><div class="form-row"><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('dpa','title',this.value)"></div><div class="form-group"><label class="form-label">Title Emphasis</label><input type="text" class="form-input" value="${esc(d.titleEmphasis)}" onchange="updateField('dpa','titleEmphasis',this.value)"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Button Text</label><input type="text" class="form-input" value="${esc(d.buttonText)}" onchange="updateField('dpa','buttonText',this.value)"></div><div class="form-group"><label class="form-label">Button Subtext</label><input type="text" class="form-input" value="${esc(d.buttonSubtext)}" onchange="updateField('dpa','buttonSubtext',this.value)"></div></div><div class="form-group"><label class="form-label">Features</label>${(d.features||[]).map((f,i)=>`<div class="feature-item"><input type="text" class="form-input" value="${esc(f)}" onchange="updateDpaFeature(${i},this.value)"><button class="btn-icon danger" onclick="deleteDpaFeature(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>`).join('')}<button class="btn btn-secondary btn-add-feature" onclick="addDpaFeature()">+ Add Feature</button></div></div></div>`},
tools(){const d=DataStore.data.tools||{items:[]};return`<div class="card"><div class="card-header"><h3 class="card-title">Section Header</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Badge</label><input type="text" class="form-input" value="${esc(d.badge)}" onchange="updateField('tools','badge',this.value)"></div><div class="form-row"><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('tools','title',this.value)"></div><div class="form-group"><label class="form-label">Title Emphasis</label><input type="text" class="form-input" value="${esc(d.titleEmphasis)}" onchange="updateField('tools','titleEmphasis',this.value)"></div></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Tools</h3><button class="btn btn-secondary" onclick="addTool()">+ Add Tool</button></div><div class="card-body">${(d.items||[]).map((t,i)=>`<div class="list-item"><div style="display:flex;gap:12px;flex:1;"><input type="text" class="form-input" value="${esc(t.title)}" placeholder="Title" style="flex:1;" onchange="updateTool(${i},'title',this.value)"><input type="text" class="form-input" value="${esc(t.description)}" placeholder="Description" style="flex:2;" onchange="updateTool(${i},'description',this.value)"><input type="text" class="form-input" value="${esc(t.url)}" placeholder="URL" style="flex:1;" onchange="updateTool(${i},'url',this.value)"></div><button class="btn-icon danger" onclick="deleteTool(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div>`).join('')}</div></div>`},
agent(){const d=DataStore.data.agent||{};return`<div class="card"><div class="card-header"><h3 class="card-title">Agent Section</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('agent','title',this.value)"></div><div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" onchange="updateField('agent','description',this.value)">${esc(d.description)}</textarea></div><div class="form-row"><div class="form-group"><label class="form-label">Button Text</label><input type="text" class="form-input" value="${esc(d.buttonText)}" onchange="updateField('agent','buttonText',this.value)"></div><div class="form-group"><label class="form-label">Image Path</label><input type="text" class="form-input" value="${esc(d.image)}" onchange="updateField('agent','image',this.value)"></div></div></div></div>`},
app(){const d=DataStore.data.app||{};return`<div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">App Section</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Title</label><input type="text" class="form-input" value="${esc(d.title)}" onchange="updateField('app','title',this.value)"></div><div class="form-group"><label class="form-label">Title Emphasis</label><input type="text" class="form-input" value="${esc(d.titleEmphasis)}" onchange="updateField('app','titleEmphasis',this.value)"></div><div class="form-group"><label class="form-label">Button Text</label><input type="text" class="form-input" value="${esc(d.buttonText)}" onchange="updateField('app','buttonText',this.value)"></div><div class="form-group"><label class="form-label">Image Path</label><input type="text" class="form-input" value="${esc(d.image)}" onchange="updateField('app','image',this.value)"></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Features</h3></div><div class="card-body">${(d.features||[]).map((f,i)=>`<div style="margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--grey-200);"><div class="form-group"><label class="form-label">Feature ${i+1} Title</label><input type="text" class="form-input" value="${esc(f.title)}" onchange="updateAppFeature(${i},'title',this.value)"></div><div class="form-group"><label class="form-label">Description</label><input type="text" class="form-input" value="${esc(f.description)}" onchange="updateAppFeature(${i},'description',this.value)"></div></div>`).join('')}</div></div></div>`},
footer(){const d=DataStore.data.footer||{columns:[]};return`<div class="card"><div class="card-header"><h3 class="card-title">Legal Text</h3></div><div class="card-body"><textarea class="form-textarea" onchange="updateField('footer','legalText',this.value)">${esc(d.legalText)}</textarea></div></div><div class="grid-2">${(d.columns||[]).map((c,ci)=>`<div class="card"><div class="card-header"><h3 class="card-title">${esc(c.title)}</h3></div><div class="card-body"><div class="form-group"><label class="form-label">Column Title</label><input type="text" class="form-input" value="${esc(c.title)}" onchange="updateFooterColumn(${ci},'title',this.value)"></div><label class="form-label">Links</label>${(c.links||[]).map((l,li)=>`<div class="feature-item"><input type="text" class="form-input" value="${esc(l.label)}" placeholder="Label" onchange="updateFooterLink(${ci},${li},'label',this.value)"><input type="text" class="form-input" value="${esc(l.url)}" placeholder="URL" onchange="updateFooterLink(${ci},${li},'url',this.value)"><button class="btn-icon danger" onclick="deleteFooterLink(${ci},${li})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>`).join('')}<button class="btn btn-secondary btn-add-feature" onclick="addFooterLink(${ci})">+ Add Link</button></div></div>`).join('')}</div>`},
blog(){const posts=BlogStore.posts||[];return`<div class="card"><div class="card-header"><h3 class="card-title">Blog Posts</h3><button class="btn btn-primary" onclick="openBlogEditor()">+ New Post</button></div><div class="card-body" style="padding:0;"><table class="blog-table"><thead><tr><th></th><th>Title</th><th>Author</th><th>Read Time</th><th></th></tr></thead><tbody>${posts.map((p,i)=>`<tr><td><img src="${esc(p.image)}" class="thumb" onerror="this.style.background='#e5e7eb'"></td><td><strong>${esc(p.title)}</strong></td><td>${esc(p.authorName)}</td><td>${esc(p.readTime)}</td><td><div class="list-item-actions"><button class="btn-icon" onclick="openBlogEditor(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></button><button class="btn-icon danger" onclick="deleteBlogPost(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div></td></tr>`).join('')}</tbody></table>${posts.length===0?'<div class="empty-state"><div class="empty-state-title">No blog posts yet</div><button class="btn btn-primary" onclick="openBlogEditor()">Create First Post</button></div>':''}</div></div>`},
navigation(){const d=DataStore.data.navigation||{items:[]};return`<div class="card"><div class="card-header"><h3 class="card-title">Navigation Menu</h3><button class="btn btn-secondary" onclick="addNavItem()">+ Add Item</button></div><div class="card-body">${(d.items||[]).map((n,i)=>`<div class="list-item"><div style="display:flex;gap:16px;flex:1;"><div class="form-group" style="flex:1;margin:0;"><input type="text" class="form-input" value="${esc(n.label)}" placeholder="Label" onchange="updateNavItem(${i},'label',this.value)"></div><div class="form-group" style="flex:1;margin:0;"><input type="text" class="form-input" value="${esc(n.url)}" placeholder="URL" onchange="updateNavItem(${i},'url',this.value)"></div></div><button class="btn-icon danger" onclick="deleteNavItem(${i})"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div>`).join('')}</div></div>`}
};
</script>
</body>
</html>
